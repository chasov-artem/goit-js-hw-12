{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/icon.svg","../src/main.js"],"sourcesContent":["export async function searchImageByQuery(query, page = 1, perPage = 15) {\n  const URL = 'https://pixabay.com/api/';\n  const API_KEY = '45098523-0f66f1bf08e0be6a1e71621a5';\n\n  try {\n    const response = await fetch(\n      `${URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`\n    );\n\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return await response.json();\n  } catch (error) {\n    throw new Error(`Failed to fetch images: ${error.message}`);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst spritePath = '../img/icon.svg';\n\nexport function renderImages(images, append = false) {\n  const imageContainer = document.querySelector('.gallery');\n\n  if (!append) {\n    imageContainer.innerHTML = '';\n  }\n\n  images.forEach(image => {\n    const imgCard = document.createElement('a');\n    imgCard.href = image.largeImageURL;\n    imgCard.classList.add('image-card');\n    imgCard.innerHTML = `\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" title=\"${image.tags}\" />\n      <div class=\"info\">\n        <p><strong>Likes:</strong> ${image.likes}</p>\n        <p><strong>Views:</strong> ${image.views}</p>\n        <p><strong>Comments:</strong> ${image.comments}</p>\n        <p><strong>Downloads:</strong> ${image.downloads}</p>\n      </div>\n    `;\n    imageContainer.appendChild(imgCard);\n  });\n\n  if (window.lightbox) {\n    window.lightbox.refresh();\n  } else {\n    window.lightbox = new SimpleLightbox('.gallery a', {});\n  }\n}\n\nexport function onFetchError(error) {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'none';\n  iziToast.error({\n    title: '',\n    message: `Failed to fetch images: ${error.message}`,\n    iconUrl: `${spritePath}#icon-Group-1`,\n    position: 'topRight',\n    backgroundColor: 'red',\n  });\n}\n","export default \"__VITE_ASSET__65a791c1__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport pathSprite from '../src/img/icon.svg';\n\nimport { searchImageByQuery } from './js/pixabay-api.js';\nimport { renderImages, onFetchError } from './js/render-functions';\n\nconst searchForm = document.querySelector('.form-inline');\nconst imageContainer = document.querySelector('.image-container');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet queryValue = '';\nlet page = 1;\nlet totalImagesLoaded = 0;\nlet totalHits = 0;\n\nsearchForm.addEventListener('submit', handleSearch);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  queryValue = form.elements.query.value.trim().toLowerCase();\n\n  if (queryValue === '') {\n    iziToast.warning({\n      title: '',\n      message: 'Search query cannot be empty.',\n      position: 'topRight',\n      backgroundColor: 'red',\n      icon: '',\n      iconUrl: `${pathSprite}#icon-Group-1`,\n    });\n    return;\n  }\n\n  page = 1;\n  totalImagesLoaded = 0;\n  imageContainer.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n  loader.style.display = 'block';\n\n  try {\n    const data = await searchImageByQuery(queryValue, page);\n    totalHits = data.totalHits;\n\n    if (data.hits.length > 0) {\n      renderImages(data.hits);\n      totalImagesLoaded += data.hits.length;\n\n      if (totalImagesLoaded < totalHits) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        iziToast.info({\n          title: '',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n          backgroundColor: 'blue',\n          icon: '',\n          iconUrl: `${pathSprite}#icon-Group-1`,\n        });\n      }\n    } else {\n      iziToast.warning({\n        title: '',\n        backgroundColor: 'red',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        iconUrl: `${pathSprite}#icon-Group-1`,\n      });\n    }\n  } catch (error) {\n    onFetchError(error);\n  } finally {\n    loader.style.display = 'none';\n    searchForm.reset();\n  }\n}\n\nasync function handleLoadMore() {\n  page += 1;\n  loader.style.display = 'block';\n\n  try {\n    const data = await searchImageByQuery(queryValue, page);\n    totalImagesLoaded += data.hits.length;\n\n    if (data.hits.length > 0) {\n      renderImages(data.hits, true);\n\n      const { height: cardHeight } =\n        imageContainer.firstElementChild.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    if (totalImagesLoaded >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        backgroundColor: 'blue',\n        icon: '',\n        iconUrl: `${pathSprite}#icon-Group-1`,\n      });\n    }\n  } catch (error) {\n    onFetchError(error);\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n"],"names":["searchImageByQuery","query","page","perPage","URL","API_KEY","response","error","spritePath","renderImages","images","append","imageContainer","image","imgCard","SimpleLightbox","onFetchError","loader","iziToast","pathSprite","searchForm","loadMoreBtn","queryValue","totalImagesLoaded","totalHits","handleSearch","handleLoadMore","event","data","cardHeight"],"mappings":"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"}